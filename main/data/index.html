<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>bc的灯</title>
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link rel="stylesheet" href="./layui/css/layui.css"  media="all">
</head>
<body>

    <ul class="layui-nav">
        <li class="layui-nav-item"><h2>Atom灯</h2></li>
        <li class="layui-nav-item layui-this"><a href="./index.html">调色</a></li>
        <li class="layui-nav-item">
            <a href="javascript:;">其他</a>
            <dl class="layui-nav-child">
                <dd><a href="./setting.html">设置</a></dd>
                <!-- <dd><a href="./upgrade.html">升级</a></dd> -->
            </dl>
        </li>
    </ul>
<fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
  <legend>调整灯光颜色</legend>
</fieldset>
 
<div style="margin-left: 30px;">
  <div id="colorpicker1"></div>
</div>
          
<script src="./layui/layui.all.js" charset="utf-8"></script>
<script>
layui.use('element', function(){
  var element = layui.element; //导航的hover效果、二级菜单等功能，需要依赖element模块
});

layui.use('colorpicker', function(){
    var $ = layui.$
    ,colorpicker = layui.colorpicker;
    //常规使用
    colorpicker.render({
        elem: '#colorpicker1' //绑定元素
        ,color: 'rgb(68,66,66)'
        ,format: 'rgb' //默认为 hex
        ,predefine: true // 开启预定义颜色
        ,change: function(color){ //颜色改变的回调
            var url = './rgb';
            var rgb = color.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);
            $.get(url, {'red':rgb[1],'green':rgb[2],'blue':rgb[3]});
            console.log(color);
        }
        ,done: function(color){
            var url = './ExpendSetting'
            var rgb = color.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);
            $.get(url, {'red':rgb[1],'green':rgb[2],'blue':rgb[3]});
            console.log(color);
        }
    });
});
</script>

</body>
</html>